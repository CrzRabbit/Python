'''
两个整数的 汉明距离 指的是这两个数字的二进制数对应位不同的数量。

计算一个数组中，任意两个数之间汉明距离的总和。

示例:

输入: 4, 14, 2

输出: 6

解释: 在二进制表示中，4表示为0100，14表示为1110，2表示为0010。（这样表示是为了体现后四位之间关系）
所以答案为：
HammingDistance(4, 14) + HammingDistance(4, 2) + HammingDistance(14, 2) = 2 + 2 + 2 = 6.

注意:
数组中元素的范围为从 0到 10^9。
数组的长度不超过 10^4。
'''
from typing import List
from leetcode.tools.time import *

class Solution:
    def hammingDistance(self, x: int, y: int) -> int:
        i = 1
        count = 0
        IMAX = 2 ** 31
        while i <= IMAX and (i <= x or i <= y):
            if x & i != y & i:
                count += 1
            i = i << 1
        return count

    def _1totalHammingDistance(self, nums: List[int]) -> int:
        ret = 0
        for i in range(len(nums) - 1):
            for j in range(i + 1, len(nums)):
                ret += self.hammingDistance(nums[i], nums[j])
        return ret

    def totalHammingDistance(self, nums: List[int]) -> int:
        ret = 0
        temp = [0 for i in range(32)]
        temp1 = []
        x = 1
        for i in range(32):
            temp1.append(x)
            x = x << 1
        for num in nums:
            for i in range(32):
                if num & temp1[i]:
                    temp[i] += 1

        for num in temp:
            ret += num * (len(nums) - num)
        return ret

#nums = [4, 14, 2]
nums = [9209689,4514685,8446283,8805479,2109399,1067284,8751367,1656905,8407369,1494904,363655,5072488,709426,5813903,9092783,532811,2106245,8655073,6482426,2226966,5275607,5780522,5372406,5197668,7723106,705121,7397989,1860754,2418152,6563972,6662363,3523964,4242588,2323943,2888910,4551312,4828606,5011700,1596578,371971,1115034,630373,3217932,5990259,3775050,7720986,5808438,1440950,2169376,6505457,8911692,9961398,9004232,3645555,6277546,5941608,7519561,5209754,9600197,4337342,4210908,3207606,1832379,4650528,5205137,4032944,1636773,8173757,1520736,8674055,7590012,499555,577387,5888542,8494766,8986882,9785705,5341895,1023869,6085153,6839349,2823506,3050132,8101241,4912080,2689773,4530602,7838390,9029197,9156999,4404588,8092450,3788122,2275756,279893,218934,2567601,8792556,9371161,3881251,180769,5326868,4436215,2333349,6258976,4263128,3905901,9450096,6083173,2996889,1171276,6621576,93967,3274057,1878400,2200786,291570,2106294,5812327,6083195,9869911,6133514,4710097,5614696,1587582,7189731,67640,5956481,8695937,3023473,6072740,4366481,5766992,1788806,3494763,9523160,4295307,1148730,6575733,3595333,4092216,4919364,7356382,8724328,146812,8324304,5453916,5194415,928625,3353513,4010167,2120690,8362966,2176928,1094608,841302,8617765,8791626,3617540,6941953,4951621,4309249,3517923,9688725,2792038,7359789,7574954,184572,2482668,6074916,2313935,2776899,718393,9512581,4937344,8249733,3042833,3870238,7894299,6919047,4598659,2483211,742494,6778311,2961442,6710056,7065947,6718556,6842246,2551941,7458293,4700123,4517413,7502091,9683909,6916947,4462024,3600590,6521926,6270775,9148854,1373129,1479276,3414793,9744705,1570786,2459671,8312026,3816394,1077082,3075508,2181695,344578,5483905,9219538,8183471,6951690,9289091,8594341,6572772,7768027,8989324,5117465,6163909,842286,5978406,9889301,8996220,4745251,8127795,2029959,4090562,935696,2253987,2026799,1194197,693156,1752967,6125467,4838236,160066,1876616,9879785,3215032,9327071,4068734,8744878,4673394,7313776,7057463,4523011,212255,9488847,712384,3756296,1225999,7828834,3488926,3374702,5507758,939462,4940351,9429647,7633808,8135637,7768674,4840230,8345602,5928003,7043415,572052,1123309,3263207,8576786,8623974,8215958,2226542,1446395,3288448,4312537,856451,5134563,8934282,8990263,5922461,2082110,1201217,9807496,8376920,6014095,8889523,3384596,5948192,6146183,5944180,7631497,9949904,6772486,388289,1737838,114366,1491870,7858705,5270622,5645428,9001772,5325359,3609740,8351975,2688169,7481530,3687672,9893097,6689615,3332772,395205,1913271,1788394,3487078,4255388,2339676,8565752,7206649,6652887,7434677,857481,6767306,1724873,7539233,386325,3661469,8753388,6694875,7662281,1353726,5879478,477651,7413636,6273482,7807517,4117374,9917626,6429917,3295579,1918833,8382348,9228959,8078928,8510336,2228582,7380029,4556301,1961706,3451680,9672047,2879935,8427311,1072275,8650437,9085576,9799805,1632884,8015845,4854288,2023142,6357377,9262133,6426680,5257498,5848715,2846843,1211511,1566443,2503625,6754236,2759073,8995501,6508595,1956457,5278183,2586065,933915,9193321,9111062,1439963,8573424,2990087,2514550,7547711,3914627,9437401,6870284,8719186,563104,3115784,1481938,3605760,8423360,7341997,6637255,4784318,7810065,1186478,2256432,524648,4085903,6616550,4811163,2063202,4836329,2600207,3290887,3701654,6965683,2956930,1487918,2215796,6821239,6327426,6486722,4000080,8299415,2811229,3062792,4602327,5915731,4895689,5635547,3756606,2665257,9406989,9813359,1893138,6359174,8381558,7338582,5665705,5566422,6387156,2048653,1531130,4585857,3349309,7033807,649354,8428220,8043638,7254663,1196228,2019152,3145024,2003173,861505,6001830,2049978,7006717,7164635,2770258,3945041,954096,4358254,8183514,4558723,6178971,4981430,3659510,1767143,45987,4155820,3923523,8446050,4766337,1923130,6540695,8696334,8229786,8021338,7265783,8273604,7188841,4272878,1010682,6007954,4334781,6054314,3551499,1923445,6721033,9037785,5449516,7121858,917554,2610838,7598125,579212,1844741,4539972,4190780,6993422,6480393,2333422,508663,3655543,5047328,2900996,9146780,3264901,7215153,6893705,492576,4838044,5590167,7590681,3774104,3424720,967504,1140109,1682586,929402,6289441,5983984,6661523,6473952,2567023,207310,2700212,2132652,2828367,5220667,6051743,2982414,8668306,8494414,6535083,4726295,3091460,5997893,8826930,865891,3441798,5051339,2786028,4883653,9317630,2401290,7927360,7247652,1545440,851407,5720144,1377715,1976245,8159498,4128123,6468291,5775242,8278800,4394902,8889472,5810416,791173,5581508,4607688,9528769,5010861,7007570,6614873,1038001,1433921,2294975,5108289,4798344,2720246,7682423,2229364,4112727,5019561,5793517,9975992,40722,6401122,1538237,2904006,2468206,4278372,1622073,7614125,1691435,7960745,9645856,8872688,2820262,2419999,5101879,3464119,5911320,2316722,2303918,2481158,7030057,7149148,2175850,5221083,9014590,5213860,6488429,8172829,3632973,6538139,2013176,8858815,1991816,7661072,4512307,4417905,4111492,538450,6588250,6013197,5918147,2048867,5083630,6142130,7658100,7663592,9493680,9377816,2739279,8090456,7361320,7504893,3707901,750899,7139680,314818,149520,3149949,2396137,3565310,2532410,8726820,2594456,5899673,32106,5697540,786824,4167686,318630,2491537,7789642,6561695,130822,2754219,1782302,1572790,429965,1542857,2506347,7344825,7587518,4247385,1648365,6952701,4250302,279341,9384760,576287,1431955,2412279,7765817,3999631,3471449,280028,8043235,481442,304172,9068421,5325545,7604841,4279825,4090891,8665422,23026,1702827,8782576,6446769,725565,9183386,7721340,4490472,9985880,5145584,1952275,6152976,7428221,9358932,3494782,1659404,3477284,2853942,3716737,9427108,4700634,373434,9428141,2199355,4210087,8967570,1958411,5646906,4530229,3769602,7668962,4814691,1279385,8261181,6929414,958138,4062613,4663366,6561226,4922518,4564082,5559973,4532300,7628987,8893534,8766807,4823274,3749422,2228168,7996222,4304639,8328520,9474342,3843648,9485905,7664835,8567870,1674675,3510602,9330588,504774,551520,3479186,485344,434353,9536841,5744386,7820899,1026847,5402242,8391566,9390615,2064473,1188782,5958785,2012730,5698405,2376520,4045927,9842054,2262448,2841425,7067984,9441903,7435510,8672822,2972958,3986182,2106484,5831812,6806369,9599669,3341936,5283552,2439536,9001615,1174148,8797034,8099420,7849711,2674865,9896535,2090570,2136126,7886462,1217921,6962000,7729574,9930951,8320059,6626802,6812128,1628160,6191620,3816240,610114,7411276,9678184,6498450,717533,6603540,2808691,3884870,3173058,1184143,5440044,3604421,8923075,329815,5454609,2856999,514002,4134004,4057947,7143370,2209537,8803226,5846384,5746838,8648351,2513662,8561763,3063191,9888700,7110769,6270998,9950704,3942552,9428120,5038741,2991464,7182032,840104,2207445,483116,2379559,4894666,1083698,5522931,884652,6297501,3188650,7955463,5771394,9927444,3518155,3664614,8723469,6060444,3281453,7967416,9611576,7187351,3305759,7335626,9390301,4010521,8147033,4020070,5690965,8326798,960198,9463388,7846194,1273779,1264585,3488269,4453813,8713981,9235092,3156706,6005234,1949164,5513753,5117494,2836202,5165514,3709473,714681,454420,9307532,6194915,7422592,7621775,6935562,4591973,6354676,9668004,9343659,1947805,9422530,7193588,9947929,8508992,3592174,7455725,9983037,5590570,7705056,1200327,4635511,128508,1162932,108434,800636,8824571,6362264,8679565,3663095,1148991,702159,2548234,559031,5518141,2623543,8366237,4343604,1960964,3148642,9098164,3015923,7699845,6688272,242817,3662535,4606517,9587571,8849183,3359550,4651473,2340063,8399484,6453108,7876184,4095865,2828040,1497491,6956784,3054571,3804247,2296521,269358,1509835,3293192,6303345,6689934,4969739,1062896,362340,4270040,5435974,4193842,6074945,1288826,8752979,8185189,8084516,3510606,6925661,9010667,6640535,2202145,9284706,3810644,4009322,8820241,5146912,6697680,3260937,4544405,6191589,349112,8910289,1618155,1199699,3852981,1749923,3791561,7252029,5630081,9721788,3549300,889541,6254970,3943977,950138,2552724,7853351,2904433,639153,8401881,4053577,3956981,1111522,2426742,8431480,6073237,6172094]
so = Solution()
printTime()
print(so.totalHammingDistance(nums))
printTime()